<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ucar.datalink.biz.dal.AlarmPriorityDAO">

    <resultMap id="taskPriorityResult" type="taskPriority">
        <result property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="priority" column="priority"/>
        <result property="createTime" column="create_time"/>
        <result property="modifyTime" column="modify_time"/>
    </resultMap>


    <sql id="allColumns">id,`name`,priority,create_time,modify_time</sql>

    <insert id="insert" parameterType="taskPriority" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO t_dl_alarm_priority
        ( `name`, priority, create_time, modify_time)
        VALUES
        (#{name}, #{priority},  now(), now())
    </insert>

    <select id="getById" parameterType="long" resultMap="taskPriorityResult">
        SELECT
        <include refid="allColumns"/>
        from t_dl_alarm_priority WHERE id = #{id}
    </select>

    <select id="getTaskPriorityList"  resultMap="taskPriorityResult">
        select <include refid="allColumns"/>
        from t_dl_alarm_priority where 1=1
        <if test="name != null and name !=''">
            and `name` like concat('%',#{name},'%')
        </if>
        <if test="priority != null">
            and priority = #{priority}
        </if>
    </select>
    <update id="update" parameterType="taskPriority" >
        update t_dl_alarm_priority set
        name = #{name},
        priority = #{priority},
        modify_time = now()
        where id = #{id}
    </update>

    <delete id="delete" parameterType="Long">
        delete from t_dl_alarm_priority
        where id = #{id}
    </delete>

    <select id="getAll" resultMap="taskPriorityResult" >
        select <include refid="allColumns"/>
        from t_dl_alarm_priority
    </select>

    <select id="getPriorityListByIds" resultMap="taskPriorityResult">
        select <include refid="allColumns"/>
        from t_dl_alarm_priority
        where id in
        <foreach collection="priorityIds" item="item" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>
</mapper>